<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedMeters Platform Documentation</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent-red: #ef4444;
            --accent-orange: #f97316;
            --accent-blue: #3b82f6;
            --accent-green: #22c55e;
            --accent-purple: #a855f7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            border-bottom: 1px solid var(--bg-card);
        }
        
        header h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-red), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }
        
        header p {
            font-size: 1.3rem;
            color: var(--text-secondary);
        }
        
        .meta-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .meta-info span {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .toc {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 30px;
            margin: 40px 0;
        }
        
        .toc h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--accent-blue);
        }
        
        .toc ul {
            list-style: none;
            columns: 2;
            column-gap: 40px;
        }
        
        .toc li {
            padding: 8px 0;
        }
        
        .toc a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .toc a:hover {
            color: var(--accent-orange);
        }
        
        section {
            margin: 60px 0;
            padding: 40px;
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--bg-card);
        }
        
        section h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        section h2 .icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }
        
        h3 {
            font-size: 1.4rem;
            margin: 30px 0 15px;
            color: var(--accent-blue);
        }
        
        h4 {
            font-size: 1.1rem;
            margin: 20px 0 10px;
            color: var(--accent-purple);
        }
        
        p {
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        
        .screenshot {
            margin: 30px 0;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--bg-card);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .screenshot img {
            width: 100%;
            display: block;
        }
        
        .screenshot-caption {
            background: var(--bg-card);
            padding: 15px 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .value-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .value-card h4 {
            margin-top: 0;
            color: var(--accent-green);
        }
        
        .data-source {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(168, 85, 247, 0.1));
            border-left: 4px solid var(--accent-blue);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
        }
        
        .data-source h4 {
            color: var(--accent-blue);
            margin-top: 0;
        }
        
        .anomaly-section {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(249, 115, 22, 0.1));
            border-left: 4px solid var(--accent-red);
            padding: 25px;
            border-radius: 0 12px 12px 0;
            margin: 30px 0;
        }
        
        .anomaly-section h3 {
            color: var(--accent-red);
            margin-top: 0;
        }
        
        ul, ol {
            margin: 15px 0 15px 25px;
            color: var(--text-secondary);
        }
        
        li {
            margin: 8px 0;
        }
        
        code {
            background: var(--bg-card);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: var(--accent-orange);
        }
        
        pre {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            .toc ul {
                columns: 1;
            }
        }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .badge-critical { background: rgba(239, 68, 68, 0.2); color: var(--accent-red); }
        .badge-warning { background: rgba(249, 115, 22, 0.2); color: var(--accent-orange); }
        .badge-info { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
        .badge-success { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        
        footer {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            border-top: 1px solid var(--bg-card);
        }
    </style>
</head>
<body>
    <header>
        <h1>RedMeters Platform Documentation</h1>
        <p>Intelligent Smart Meter Analytics Platform</p>
        <div class="meta-info">
            <span>üìÖ Generated: November 27, 2025</span>
            <span>üè∑Ô∏è Version: 1.0.0</span>
            <span>‚ö° Powered by Kyndryl</span>
        </div>
    </header>
    
    <div class="container">
        <nav class="toc">
            <h2>üìë Table of Contents</h2>
            <ul>
                <li><a href="#overview">1. Platform Overview</a></li>
                <li><a href="#dashboard">2. Dashboard</a></li>
                <li><a href="#meters">3. Smart Meters</a></li>
                <li><a href="#customers">4. Customers</a></li>
                <li><a href="#alerts">5. Alerts</a></li>
                <li><a href="#analytics">6. Analytics</a></li>
                <li><a href="#about">7. About</a></li>
                <li><a href="#anomaly-detection">8. Anomaly Detection Deep Dive</a></li>
                <li><a href="#data-architecture">9. Data Architecture</a></li>
            </ul>
        </nav>
        
        <!-- Section 1: Overview -->
        <section id="overview">
            <h2><span class="icon" style="background: linear-gradient(135deg, var(--accent-red), var(--accent-orange));">‚ö°</span> Platform Overview</h2>
            <p class="subtitle">Transforming raw smart meter data into actionable customer intelligence</p>
            
            <p>RedMeters is a comprehensive smart grid analytics platform that processes 15-minute interval energy consumption data from smart meters to extract customer intelligence, detect anomalies, and monitor grid health‚Äîall while maintaining a privacy-first approach that avoids collecting personally identifiable information.</p>
            
            <div class="value-card">
                <h4>üéØ Core Value Proposition</h4>
                <p>Energy retailers collect massive amounts of consumption data but rarely leverage it beyond basic billing. RedMeters unlocks this potential by applying machine learning to identify customer segments, detect consumption anomalies, predict equipment failures, and forecast demand‚Äîall from pure numerical patterns.</p>
            </div>
            
            <h3>Technology Stack</h3>
            <div class="grid-2">
                <div class="value-card">
                    <h4>Backend</h4>
                    <ul>
                        <li>Ruby (Sinatra + ActiveRecord 7.2)</li>
                        <li>PostgreSQL 14+</li>
                        <li>RESTful API architecture</li>
                    </ul>
                </div>
                <div class="value-card">
                    <h4>Frontend</h4>
                    <ul>
                        <li>React 19 with Vite</li>
                        <li>Tailwind CSS</li>
                        <li>Lucide React icons</li>
                    </ul>
                </div>
                <div class="value-card">
                    <h4>Machine Learning</h4>
                    <ul>
                        <li>Python with scikit-learn</li>
                        <li>Isolation Forest (anomalies)</li>
                        <li>K-Means (segmentation)</li>
                        <li>Prophet (forecasting)</li>
                    </ul>
                </div>
                <div class="value-card">
                    <h4>Infrastructure</h4>
                    <ul>
                        <li>Azure PostgreSQL</li>
                        <li>Background scheduler</li>
                        <li>Real-time data processing</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- Section 2: Dashboard -->
        <section id="dashboard">
            <h2><span class="icon" style="background: var(--accent-blue);">üìä</span> Dashboard</h2>
            <p class="subtitle">Real-time overview of smart meter network health and performance</p>
            
            <div class="screenshot">
                <img src="screenshots/01-dashboard.png" alt="Dashboard Screenshot">
                <div class="screenshot-caption">Dashboard showing key metrics, grid health, and customer segments</div>
            </div>
            
            <div class="value-card">
                <h4>üí° Business Value</h4>
                <p>The Dashboard provides operations teams with an at-a-glance view of network health, enabling rapid identification of issues before they impact customers. Key metrics are refreshed every 30 seconds to ensure real-time visibility.</p>
            </div>
            
            <h3>Key Metrics Displayed</h3>
            <ul>
                <li><strong>Total Meters:</strong> Count of all smart meters in the network with active/inactive status</li>
                <li><strong>Readings Today:</strong> Volume of meter readings processed in the current day</li>
                <li><strong>Active Alerts:</strong> Current anomalies and issues requiring attention</li>
                <li><strong>Customers:</strong> Total customer base with segment distribution</li>
            </ul>
            
            <h3>Grid Health Panel</h3>
            <p>Real-time monitoring of electrical grid performance:</p>
            <ul>
                <li><strong>Average Voltage:</strong> Should stay within 216-244V (¬±6% of 230V nominal)</li>
                <li><strong>Power Factor:</strong> Efficiency measure; optimal is ‚â•0.90, warning below 0.85</li>
                <li><strong>Total Consumption:</strong> Aggregate kWh consumed in the last hour</li>
                <li><strong>Anomaly Rate:</strong> Percentage of readings flagged as anomalous</li>
            </ul>
            
            <div class="data-source">
                <h4>üì° Data Sources</h4>
                <p><strong>API Endpoint:</strong> <code>GET /api/v1/analytics/overview</code> and <code>GET /api/v1/analytics/grid-health</code></p>
                <p><strong>Database Tables:</strong> <code>smart_meters</code>, <code>meter_readings</code>, <code>alerts</code>, <code>customers</code></p>
                <p><strong>Refresh Rate:</strong> Auto-refresh every 30 seconds</p>
            </div>
        </section>
        
        <!-- Section 3: Smart Meters -->
        <section id="meters">
            <h2><span class="icon" style="background: var(--accent-purple);">‚öôÔ∏è</span> Smart Meters</h2>
            <p class="subtitle">Comprehensive inventory and management of all network meters</p>
            
            <div class="screenshot">
                <img src="screenshots/02-meters.png" alt="Smart Meters Screenshot">
                <div class="screenshot-caption">Smart Meters list with search, filtering, and meter details</div>
            </div>
            
            <div class="value-card">
                <h4>üí° Business Value</h4>
                <p>Provides field operations and asset management teams with a complete view of the meter fleet. Enables quick identification of specific meters for maintenance, troubleshooting, or analysis. Search and filter capabilities support rapid response to customer inquiries.</p>
            </div>
            
            <h3>Features</h3>
            <ul>
                <li><strong>Search:</strong> Find meters by meter number or customer ID</li>
                <li><strong>Filters:</strong> Filter by meter type (residential, commercial, industrial) and status</li>
                <li><strong>Pagination:</strong> Navigate through large meter inventories efficiently</li>
                <li><strong>Drill-down:</strong> Click any meter to view detailed readings and history</li>
            </ul>
            
            <h3>Meter Types</h3>
            <ul>
                <li><span class="badge badge-info">Residential</span> - Household meters with typical 5-25 kWh daily usage</li>
                <li><span class="badge badge-warning">Commercial</span> - Business premises with higher daytime consumption</li>
                <li><span class="badge badge-critical">Industrial</span> - Manufacturing/heavy usage with demand-based tariffs</li>
            </ul>
            
            <div class="data-source">
                <h4>üì° Data Sources</h4>
                <p><strong>API Endpoint:</strong> <code>GET /api/v1/meters</code></p>
                <p><strong>Database Table:</strong> <code>smart_meters</code></p>
                <p><strong>Relationships:</strong> Links to <code>customers</code>, <code>transformers</code>, and <code>meter_readings</code></p>
            </div>
        </section>
        
        <!-- Section 4: Customers -->
        <section id="customers">
            <h2><span class="icon" style="background: var(--accent-green);">üë•</span> Customers</h2>
            <p class="subtitle">ML-powered customer segmentation and profile management</p>
            
            <div class="screenshot">
                <img src="screenshots/03-customers.png" alt="Customers Screenshot">
                <div class="screenshot-caption">Customer cards with segment badges, tariff types, and special features</div>
            </div>
            
            <div class="value-card">
                <h4>üí° Business Value</h4>
                <p>Without collecting personal data, consumption patterns reveal customer profiles. Power spikes at 3:30 PM suggest school-age children arriving home. This privacy-first intelligence enables personalized services, targeted energy efficiency programs, and improved customer experience.</p>
            </div>
            
            <h3>Customer Segments (12 ML-derived categories)</h3>
            <div class="grid-2">
                <div class="value-card">
                    <h4>Residential Patterns</h4>
                    <ul>
                        <li>Evening Residential Peak</li>
                        <li>Night Owl Households</li>
                        <li>Retired Home All Day</li>
                        <li>Weekend Shift Users</li>
                    </ul>
                </div>
                <div class="value-card">
                    <h4>Commercial/Industrial</h4>
                    <ul>
                        <li>Business Hours Commercial</li>
                        <li>Early Morning Industrial</li>
                        <li>High Consumption All Day</li>
                    </ul>
                </div>
                <div class="value-card">
                    <h4>Efficiency & Technology</h4>
                    <ul>
                        <li>Efficiency Optimizers</li>
                        <li>Solar Battery Households</li>
                        <li>EV Charging Households</li>
                    </ul>
                </div>
                <div class="value-card">
                    <h4>Usage Profiles</h4>
                    <ul>
                        <li>Low Use Minimal</li>
                        <li>Seasonal Variation Heavy</li>
                    </ul>
                </div>
            </div>
            
            <h3>Customer Badges</h3>
            <ul>
                <li><span class="badge badge-success">Solar</span> - Solar panel installation detected</li>
                <li><span class="badge badge-info">EV</span> - Electric vehicle charging patterns detected</li>
                <li><span class="badge badge-warning">DR</span> - Opted into Demand Response program</li>
            </ul>
            
            <div class="data-source">
                <h4>üì° Data Sources</h4>
                <p><strong>API Endpoint:</strong> <code>GET /api/v1/customers</code></p>
                <p><strong>Database Table:</strong> <code>customers</code></p>
                <p><strong>ML Model:</strong> <code>customer_segmenter.joblib</code> (K-Means clustering)</p>
                <p><strong>Segmentation Features:</strong> Consumption patterns, peak hours, day-of-week variation, seasonal trends</p>
            </div>
        </section>
        
        <!-- Section 5: Alerts -->
        <section id="alerts">
            <h2><span class="icon" style="background: var(--accent-red);">üö®</span> Alerts</h2>
            <p class="subtitle">Real-time anomaly detection and alert management</p>
            
            <div class="screenshot">
                <img src="screenshots/04-alerts.png" alt="Alerts Screenshot">
                <div class="screenshot-caption">Alert cards showing severity, confidence scores, and detailed explanations</div>
            </div>
            
            <div class="value-card">
                <h4>üí° Business Value</h4>
                <p>Proactive anomaly detection enables rapid response to potential issues before they escalate. Each alert includes detailed explanations of why it was triggered, confidence scores, and direct links to affected meters. This reduces mean-time-to-resolution and prevents service disruptions.</p>
            </div>
            
            <h3>Alert Severity Levels</h3>
            <ul>
                <li><span class="badge badge-critical">Critical</span> - Immediate attention required (voltage >10% deviation, consumption >4x average)</li>
                <li><span class="badge badge-warning">Warning</span> - Investigation recommended (voltage 6-10% deviation, consumption 2-4x average)</li>
            </ul>
            
            <h3>Alert Information</h3>
            <ul>
                <li><strong>Title:</strong> Describes the type of anomaly detected</li>
                <li><strong>Description:</strong> Human-readable explanation of what triggered the alert</li>
                <li><strong>Confidence:</strong> ML model confidence score (percentage)</li>
                <li><strong>Asset:</strong> Link to the affected meter or transformer</li>
                <li><strong>Timestamp:</strong> When the anomaly was detected</li>
                <li><strong>Resolve:</strong> Button to mark alert as resolved with audit trail</li>
            </ul>
            
            <div class="data-source">
                <h4>üì° Data Sources</h4>
                <p><strong>API Endpoint:</strong> <code>GET /api/v1/alerts</code></p>
                <p><strong>Database Table:</strong> <code>alerts</code></p>
                <p><strong>Generated By:</strong> <code>AnomalyDetectionService</code> running every 5 minutes</p>
            </div>
        </section>
        
        <!-- Section 6: Analytics -->
        <section id="analytics">
            <h2><span class="icon" style="background: var(--accent-orange);">üìà</span> Analytics</h2>
            <p class="subtitle">Deep dive into grid performance and infrastructure health</p>
            
            <div class="screenshot">
                <img src="screenshots/05-analytics.png" alt="Analytics Screenshot">
                <div class="screenshot-caption">Analytics dashboard with grid metrics, transformer fleet health, and segment analysis</div>
            </div>
            
            <div class="value-card">
                <h4>üí° Business Value</h4>
                <p>Provides engineering and planning teams with detailed insights into grid performance and infrastructure health. Transformer risk scoring enables proactive maintenance scheduling, reducing unplanned outages and extending asset life.</p>
            </div>
            
            <h3>Live Grid Metrics</h3>
            <ul>
                <li><strong>Voltage Range:</strong> Min/max voltage across all meters in the last hour</li>
                <li><strong>Power Factor:</strong> Average power factor indicating grid efficiency</li>
                <li><strong>Hourly Consumption/Demand:</strong> Aggregate energy metrics</li>
                <li><strong>Anomaly Rate:</strong> Percentage of readings flagged as anomalous</li>
            </ul>
            
            <h3>Transformer Fleet Health</h3>
            <ul>
                <li><strong>Total/Operational:</strong> Count of transformers by status</li>
                <li><strong>High Risk:</strong> Transformers with failure risk >70%</li>
                <li><strong>Aging (>20 yrs):</strong> Transformers approaching end of life</li>
                <li><strong>Average Failure Risk:</strong> Fleet-wide risk score from ML model</li>
            </ul>
            
            <div class="data-source">
                <h4>üì° Data Sources</h4>
                <p><strong>API Endpoints:</strong> <code>GET /api/v1/analytics/grid-health</code>, <code>GET /api/v1/analytics/transformers</code></p>
                <p><strong>Database Tables:</strong> <code>meter_readings</code>, <code>transformers</code>, <code>customers</code></p>
                <p><strong>ML Model:</strong> <code>failure_predictor.joblib</code> (Random Forest for transformer risk)</p>
            </div>
        </section>
        
        <!-- Section 7: About -->
        <section id="about">
            <h2><span class="icon" style="background: var(--accent-blue);">‚ÑπÔ∏è</span> About</h2>
            <p class="subtitle">Project vision, origin story, and team credits</p>
            
            <div class="screenshot">
                <img src="screenshots/06-about.png" alt="About Screenshot">
                <div class="screenshot-caption">About page with project vision, capabilities, and origin story</div>
            </div>
            
            <div class="value-card">
                <h4>üí° Business Value</h4>
                <p>Provides stakeholders with context on the platform's purpose, capabilities, and origins. The expandable meeting transcript preserves the brainstorming session that sparked the project, ensuring institutional knowledge is maintained.</p>
            </div>
            
            <h3>Origin Story</h3>
            <p>This application was born from a brainstorming session between <strong>Peter Hogg</strong>, <strong>Rima Yammouni</strong>, and <strong>Jim Freeman</strong>. During this discussion, the team identified a significant opportunity: energy retailers collect massive amounts of 15-minute interval consumption data but rarely leverage it beyond billing.</p>
            
            <h3>Platform Capabilities</h3>
            <ul>
                <li><strong>Customer Segmentation:</strong> ML-based profiling from consumption patterns</li>
                <li><strong>Demand Forecasting:</strong> 72-hour predictions using Prophet model</li>
                <li><strong>Anomaly Detection:</strong> Real-time alerts for consumption and voltage issues</li>
                <li><strong>Failure Prediction:</strong> Proactive transformer maintenance scheduling</li>
            </ul>
        </section>
        
        <!-- Section 8: Anomaly Detection Deep Dive -->
        <section id="anomaly-detection">
            <h2><span class="icon" style="background: var(--accent-red);">üîç</span> Anomaly Detection Deep Dive</h2>
            <p class="subtitle">How the system identifies and classifies anomalies</p>
            
            <div class="anomaly-section">
                <h3>üß† Two-Layer Detection Approach</h3>
                <p>RedMeters employs a sophisticated two-layer approach to anomaly detection, combining machine learning with rule-based validation:</p>
                
                <h4>Layer 1: ML-Based Detection (Primary)</h4>
                <p>Uses an <strong>Isolation Forest</strong> algorithm trained on historical meter readings. This unsupervised learning approach identifies anomalies by:</p>
                <ul>
                    <li>Building random decision trees that isolate observations</li>
                    <li>Anomalies require fewer splits to isolate (shorter path length)</li>
                    <li>Configured with 2% contamination rate (expected anomaly frequency)</li>
                    <li>Features: consumption, demand, voltage, power factor, hour, day of week</li>
                </ul>
                
                <h4>Layer 2: Rule-Based Detection (Fallback & Validation)</h4>
                <p>Provides human-interpretable explanations and catches specific known issues:</p>
            </div>
            
            <h3>Anomaly Types and Thresholds</h3>
            
            <div class="value-card">
                <h4>‚ö° Voltage Anomalies</h4>
                <p><strong>Normal Range:</strong> 216V - 244V (¬±6% of 230V nominal)</p>
                <ul>
                    <li><span class="badge badge-warning">Warning</span> 6-10% deviation from 230V nominal</li>
                    <li><span class="badge badge-critical">Critical</span> >10% deviation from 230V nominal</li>
                </ul>
                <p><strong>Score Contribution:</strong> <code>voltage_deviation √ó 0.4</code></p>
            </div>
            
            <div class="value-card">
                <h4>üìä Power Factor Anomalies</h4>
                <p><strong>Minimum Threshold:</strong> 0.85</p>
                <ul>
                    <li><span class="badge badge-warning">Warning</span> Power factor 0.75 - 0.85</li>
                    <li><span class="badge badge-critical">Critical</span> Power factor below 0.75</li>
                </ul>
                <p><strong>Score Contribution:</strong> <code>(0.85 - power_factor) √ó 0.3</code></p>
            </div>
            
            <div class="value-card">
                <h4>üìà Consumption Anomalies</h4>
                <p><strong>Baseline:</strong> 7-day rolling average for each meter</p>
                <ul>
                    <li><span class="badge badge-warning">Warning</span> 200-400% of 7-day average</li>
                    <li><span class="badge badge-critical">Critical</span> >400% of 7-day average</li>
                </ul>
                <p><strong>Score Contribution:</strong> <code>deviation_ratio √ó 0.3</code></p>
            </div>
            
            <h3>Anomaly Score Calculation</h3>
            <pre><code>def analyze_reading(reading):
    score = 0.0
    
    # Voltage check (weight: 0.4)
    voltage_deviation = abs(reading.voltage - 230) / 230
    if voltage_deviation > 0.06:
        score += voltage_deviation * 0.4
    
    # Power factor check (weight: 0.3)
    if reading.power_factor < 0.85:
        score += (0.85 - reading.power_factor) * 0.3
    
    # Consumption spike check (weight: 0.3)
    avg = meter.average_consumption(period=7.days)
    deviation = abs(reading.consumption - avg) / avg
    if deviation > 2.0:
        score += deviation * 0.3
    
    return min(score, 1.0)  # Cap at 1.0</code></pre>
            
            <h3>Alert Generation</h3>
            <p>When the combined anomaly score exceeds <strong>0.7</strong>, an alert is generated with:</p>
            <ul>
                <li>Human-readable explanation of each contributing factor</li>
                <li>Severity based on worst individual factor</li>
                <li>Confidence score (anomaly score √ó 100%)</li>
                <li>Direct link to affected meter</li>
            </ul>
            
            <div class="data-source">
                <h4>üì° Detection Pipeline</h4>
                <p><strong>Service:</strong> <code>AnomalyDetectionService</code> (<code>app/services/anomaly_detection_service.rb</code>)</p>
                <p><strong>ML Model:</strong> <code>ml/models/anomaly_detector.joblib</code></p>
                <p><strong>Schedule:</strong> Runs every 5 minutes via <code>BackgroundScheduler</code></p>
                <p><strong>Data Window:</strong> Analyzes readings from the last hour (up to 10,000 readings)</p>
            </div>
        </section>
        
        <!-- Section 9: Data Architecture -->
        <section id="data-architecture">
            <h2><span class="icon" style="background: var(--accent-purple);">üóÑÔ∏è</span> Data Architecture</h2>
            <p class="subtitle">Database schema and data flow</p>
            
            <h3>Core Data Tables</h3>
            
            <div class="value-card">
                <h4>smart_meters</h4>
                <p>Primary meter inventory with type, status, and relationships</p>
                <ul>
                    <li><code>meter_number</code> - Unique meter identifier</li>
                    <li><code>customer_id</code> - FK to customers</li>
                    <li><code>transformer_id</code> - FK to transformers</li>
                    <li><code>meter_type</code> - residential/commercial/industrial</li>
                    <li><code>status</code> - active/inactive/maintenance</li>
                </ul>
            </div>
            
            <div class="value-card">
                <h4>meter_readings</h4>
                <p>Time-series consumption data (15-minute intervals)</p>
                <ul>
                    <li><code>meter_id</code> - FK to smart_meters</li>
                    <li><code>reading_time</code> - Timestamp of reading</li>
                    <li><code>consumption_kwh</code> - Energy consumed</li>
                    <li><code>demand_kw</code> - Peak demand</li>
                    <li><code>voltage</code> - Measured voltage</li>
                    <li><code>power_factor</code> - Power efficiency</li>
                    <li><code>quality_flag</code> - normal/anomaly/estimated</li>
                </ul>
            </div>
            
            <div class="value-card">
                <h4>customers</h4>
                <p>Privacy-first customer profiles with ML-derived segments</p>
                <ul>
                    <li><code>customer_hash</code> - Anonymized identifier</li>
                    <li><code>segment_id</code> - ML-derived segment</li>
                    <li><code>segment_confidence</code> - ML confidence score</li>
                    <li><code>tariff_type</code> - flat/tou/demand</li>
                    <li><code>solar_installed</code> - Boolean flag</li>
                    <li><code>ev_charging</code> - Boolean flag</li>
                </ul>
            </div>
            
            <div class="value-card">
                <h4>alerts</h4>
                <p>Generated anomaly alerts with full audit trail</p>
                <ul>
                    <li><code>title</code> - Alert summary</li>
                    <li><code>description</code> - Detailed explanation</li>
                    <li><code>severity</code> - warning/critical</li>
                    <li><code>source</code> - anomaly_detection/ml_model</li>
                    <li><code>confidence</code> - Score percentage</li>
                    <li><code>resolved_at</code> - Resolution timestamp</li>
                    <li><code>resolved_by</code> - User who resolved</li>
                </ul>
            </div>
            
            <h3>Data Flow</h3>
            <pre><code>Smart Meters ‚Üí Meter Readings ‚Üí Anomaly Detection Service
                                          ‚Üì
                                 [ML Model: Isolation Forest]
                                          ‚Üì
                        [Rule-Based Validation & Scoring]
                                          ‚Üì
                               Alert Generation ‚Üí UI Display</code></pre>
            
            <h3>ML Models</h3>
            <ul>
                <li><code>anomaly_detector.joblib</code> - Isolation Forest for consumption/voltage anomalies</li>
                <li><code>customer_segmenter.joblib</code> - K-Means clustering for customer segments</li>
                <li><code>demand_forecaster.joblib</code> - Prophet time-series for demand prediction</li>
                <li><code>failure_predictor.joblib</code> - Random Forest for transformer failure risk</li>
            </ul>
        </section>
    </div>
    
    <footer>
        <p>RedMeters Platform Documentation v1.0.0</p>
        <p>Built on insights from stakeholder discussions ‚Ä¢ Powered by Kyndryl</p>
        <p>¬© 2025 Red Energy Smart Meters Project</p>
    </footer>
</body>
</html>

